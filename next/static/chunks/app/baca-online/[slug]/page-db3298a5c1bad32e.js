(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[930],{5710:(e,s,a)=>{Promise.resolve().then(a.bind(a,8414))},8414:(e,s,a)=>{"use strict";a.d(s,{ImageViewer:()=>x});var t=a(5155),l=a(2115);let n=()=>{let[e,s]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{let e=()=>{s(window.innerWidth<=768)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),e};var c=a(137),i=a(1160),r=a(8173),o=a.n(r),d=a(6046),m=a(860),u=a(6479);let h=()=>(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-2",children:[(0,t.jsx)("div",{className:"w-full aspect-[14/20] bg-gray-200 animate-pulse rounded"}),(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsxs)("div",{className:"w-full",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("p",{className:"font-medium text-lg bg-gray-50 animate-pulse h-8 w-40 rounded"}),(0,t.jsxs)("div",{className:" flex gap-2 items-center justify-end",children:[(0,t.jsx)("button",{className:"btn btn-outline btn-sm",children:(0,t.jsx)("i",{className:"bi bi-chevron-left"})}),(0,t.jsx)("button",{className:"btn btn-outline btn-sm",children:(0,t.jsx)("i",{className:"bi bi-chevron-right"})})]})]}),(0,t.jsx)("ul",{className:"flex gap-1 w-full overflow-auto",children:[...Array(10).keys()].map(e=>(0,t.jsx)("li",{className:"rounded flex-shrink-0 w-20 aspect-[14/20] object-cover select-none bg-gray-50 animate-pulse",id:"page-".concat(e)},e))})]}),(0,t.jsxs)("div",{className:"w-full",children:[(0,t.jsx)("h2",{className:"font-medium text-lg bg-gray-50 animate-pulse h-8 w-52 rounded mb-2"}),(0,t.jsx)("p",{className:"font-medium text-lg bg-gray-50 animate-pulse h-8 w-36 rounded"}),(0,t.jsx)("div",{className:"mt-4 bg-gray-50 animate-pulse h-5 w-full rounded"}),(0,t.jsx)("div",{className:"mt-2 bg-gray-50 animate-pulse h-5 w-full rounded"}),(0,t.jsx)("div",{className:"mt-2 bg-gray-50 animate-pulse h-5 w-full rounded"}),(0,t.jsx)("div",{className:"mt-2 bg-gray-50 animate-pulse h-5 w-3/4 rounded"})]})]})]}),g=e=>{let{width:s,height:a,bookSlug:l,page:n}=e,c="".concat("https://bukuesto-backend.vercel.app/read-online","/book/").concat(l,"/").concat(n);return(0,t.jsx)("img",{src:c,style:{width:s,height:a,objectFit:"cover"},onContextMenu:e=>e.preventDefault()})},p=e=>{let{book:s,totalPage:a,currentPage:n}=e,c=(0,d.useRouter)(),i=l.createRef();return a?((0,l.useEffect)(()=>{let e=document.getElementById("page-".concat(n));e&&e.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},[n]),(0,t.jsxs)("div",{className:"w-full",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("p",{className:"font-medium text-lg",children:"Daftar Halaman"}),(0,t.jsxs)("div",{className:" flex gap-2 items-center justify-end",children:[(0,t.jsx)("button",{onClick:()=>{n>0?c.push("?page=".concat(n-1)):c.push("?page=".concat(n))},className:"btn btn-outline btn-sm",children:(0,t.jsx)("i",{className:"bi bi-chevron-left"})}),(0,t.jsx)("button",{onClick:()=>{n<a?c.push("?page=".concat(n+1)):c.push("?page=".concat(n))},className:"btn btn-outline btn-sm",children:(0,t.jsx)("i",{className:"bi bi-chevron-right"})})]})]}),(0,t.jsx)("ul",{className:"flex gap-1 w-full overflow-auto",ref:i,children:[...Array(a).keys()].map(e=>(0,t.jsx)("li",{className:"flex-shrink-0 w-20 aspect-[14/20] object-cover select-none",id:"page-".concat(e),children:(0,t.jsxs)(o(),{href:"?page=".concat(e),replace:!0,className:"relative",children:[(0,t.jsx)("img",{src:"".concat("https://bukuesto-backend.vercel.app/read-online","/book/").concat(s.slug,"/").concat(e),alt:"Buku ".concat(s.title," - Halaman ").concat(e),loading:"lazy",className:"flex-shrink-0 w-20 aspect-[14/20] object-cover"}),(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center hover:bg-primary/50 focus:bg-primary/50 duration-100 ".concat(e===n?"bg-primary/50":""),children:(0,t.jsx)("span",{className:"".concat(n===e?"bg-primary":"bg-neutral/30"," text-white rounded-full w-6 h-6 flex items-center justify-center"),children:e+1})})]})},e))})]})):(0,t.jsx)("div",{children:"Loading..."})},x=e=>{let{book:s}=e,a=(0,d.useSearchParams)().get("page")||"0",{data:r,isLoading:o}=(0,m.Ay)("".concat("https://bukuesto-backend.vercel.app/read-online","/total-page/").concat(s.slug),c.A,{revalidateOnFocus:!1,revalidateOnReconnect:!1,revalidateIfStale:!1}),x=n(),[b,j]=(0,l.useState)(0),[f,v]=(0,l.useState)(0),N=Number.isNaN(+a)?0:0>+a?0:+a;return((0,l.useEffect)(()=>{var e;let s=(null===(e=document.getElementById("page-header"))||void 0===e?void 0:e.offsetHeight)||0,a=window.innerHeight,t=window.innerWidth-50;x?(v(t),j(20*t/14)):(j(a-s-24-24-24),v((a-s-24-24-24)*.7)),r&&!o&&new u.A(".zoomist-container",{maxScale:4,bounds:!0,slider:!0,zoomer:!0})},[r,x]),null==r?void 0:r.data.totalPage)?(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-40",children:[(0,t.jsx)("div",{className:"zoomist-container",style:{objectFit:"contain",width:f,height:b},children:(0,t.jsx)("div",{className:"zoomist-wrapper",children:(0,t.jsx)("div",{className:"zoomist-image",children:(0,t.jsx)(g,{width:f,height:b,bookSlug:s.slug,page:N})})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)(p,{book:s,totalPage:r.data.totalPage,currentPage:N}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsxs)("article",{className:"prose",children:[(0,t.jsx)("h2",{className:"",children:s.title}),(0,t.jsxs)("h2",{className:"text-sm text-gray-600",children:[s.published_year," ",s.publisher," | ",(0,i.h)(s.price)]}),(0,t.jsx)("div",{className:"mt-4",children:(0,i.y)(s.description)})]}),(0,t.jsx)("a",{href:"/detail/".concat(s.slug),className:"btn btn-sm btn-primary",children:"Detail Buku"})]})]})]}):(0,t.jsx)(h,{})}},137:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=async e=>{let s=await fetch(e);if(!s.ok)throw Error("Network response was not ok");return s.json()}},1160:(e,s,a)=>{"use strict";a.d(s,{h:()=>n,y:()=>l});var t=a(5155);let l=e=>e.split("\n").map((e,s)=>(0,t.jsx)("p",{children:e},s)),n=e=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(e)}},e=>{var s=s=>e(e.s=s);e.O(0,[860,466,441,517,358],()=>s(5710)),_N_E=e.O()}]);