(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[930],{5710:(e,t,a)=>{Promise.resolve().then(a.bind(a,2605))},2605:(e,t,a)=>{"use strict";a.d(t,{ImageViewer:()=>g});var s=a(5155),l=a(2115);let n=()=>{let[e,t]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{let e=()=>{t(window.innerWidth<=768)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),e};var c=a(1160),r=a(6479);let i=()=>(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-2",children:[(0,s.jsx)("div",{className:"w-full aspect-[14/20] bg-gray-200 animate-pulse rounded"}),(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("p",{className:"font-medium text-lg bg-gray-50 animate-pulse h-8 w-40 rounded"}),(0,s.jsxs)("div",{className:" flex gap-2 items-center justify-end",children:[(0,s.jsx)("button",{className:"btn btn-outline btn-sm",children:(0,s.jsx)("i",{className:"bi bi-chevron-left"})}),(0,s.jsx)("button",{className:"btn btn-outline btn-sm",children:(0,s.jsx)("i",{className:"bi bi-chevron-right"})})]})]}),(0,s.jsx)("ul",{className:"flex gap-1 w-full overflow-auto",children:[...Array(10).keys()].map(e=>(0,s.jsx)("li",{className:"rounded flex-shrink-0 w-20 aspect-[14/20] object-cover select-none bg-gray-50 animate-pulse",id:"page-".concat(e)},e))})]}),(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)("h2",{className:"font-medium text-lg bg-gray-50 animate-pulse h-8 w-52 rounded mb-2"}),(0,s.jsx)("p",{className:"font-medium text-lg bg-gray-50 animate-pulse h-8 w-36 rounded"}),(0,s.jsx)("div",{className:"mt-4 bg-gray-50 animate-pulse h-5 w-full rounded"}),(0,s.jsx)("div",{className:"mt-2 bg-gray-50 animate-pulse h-5 w-full rounded"}),(0,s.jsx)("div",{className:"mt-2 bg-gray-50 animate-pulse h-5 w-full rounded"}),(0,s.jsx)("div",{className:"mt-2 bg-gray-50 animate-pulse h-5 w-3/4 rounded"})]})]})]}),o=e=>{let[t,a]=(0,l.useState)(null),[s,n]=(0,l.useState)(!0),[c,r]=(0,l.useState)(null);return(0,l.useEffect)(()=>{(async()=>{try{let t=await fetch(e);if(!t.ok)throw Error("Network response was not ok");let s=await t.json();a(s)}catch(e){r(e)}finally{n(!1)}})()},[e]),{data:t,loading:s,error:c}};var d=a(4721);let u=e=>{let{url:t,alt:a,cacheKey:l,className:n,style:c}=e;return(0,s.jsx)(s.Fragment,{children:t?(0,s.jsx)("img",{src:t,alt:a,style:c,className:n,onContextMenu:e=>e.preventDefault(),loading:"lazy"}):(0,s.jsx)("div",{style:c,className:n})})},m=e=>{let{book:t,totalPage:a,currentPage:n,setPage:c}=e,r=l.createRef();return a?((0,l.useEffect)(()=>{let e=document.getElementById("page-".concat(n));if(e){var t,a;null===(a=r.current)||void 0===a||a.scrollTo({left:e.offsetLeft-(null===(t=r.current)||void 0===t?void 0:t.offsetLeft),behavior:"smooth"})}},[n]),(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("p",{className:"font-medium text-lg",children:"Daftar Halaman"}),(0,s.jsxs)("div",{className:" flex gap-2 items-center justify-end",children:[(0,s.jsx)("button",{onClick:()=>{n>0?c(n-1):c(n)},className:"btn btn-outline btn-sm",children:(0,s.jsx)("i",{className:"bi bi-chevron-left"})}),(0,s.jsx)("button",{onClick:()=>{n<a?c(n+1):c(n)},className:"btn btn-outline btn-sm",children:(0,s.jsx)("i",{className:"bi bi-chevron-right"})})]})]}),(0,s.jsx)("ul",{className:"flex gap-1 w-full overflow-auto",ref:r,children:[...Array(a).keys()].map(e=>(0,s.jsx)("li",{className:"flex-shrink-0 w-20 aspect-[14/20] object-cover select-none",id:"page-".concat(e),children:(0,s.jsxs)("button",{onClick:()=>c(e),className:"relative",children:[(0,s.jsx)(u,{url:"".concat("https://bukuesto-backend.vercel.app/read-online","/book/").concat(t.slug,"/").concat(e),alt:"Buku ".concat(t.title," - Halaman ").concat(e),loading:"lazy",cacheKey:"book-".concat(t.slug,"-page-").concat(e),className:"flex-shrink-0 w-20 aspect-[14/20] object-cover"}),(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center hover:bg-primary/50 focus:bg-primary/50 duration-100 ".concat(e===n?"bg-primary/50":""),children:(0,s.jsx)("span",{className:"".concat(n===e?"bg-primary":"bg-neutral/30"," text-white rounded-full w-6 h-6 flex items-center justify-center"),children:e+1})})]})},e))})]})):(0,s.jsx)("div",{children:"Loading..."})},g=e=>{let{book:t}=e,[a,g]=(0,d.M)("last_page_".concat(t.slug),0),{data:h,loading:x}=o("".concat("https://bukuesto-backend.vercel.app/read-online","/total-page/").concat(t.slug)),b=n(),[f,p]=(0,l.useState)(0),[j,v]=(0,l.useState)(0),w=a<0?0:a;return((0,l.useEffect)(()=>{var e;let t=(null===(e=document.getElementById("page-header"))||void 0===e?void 0:e.offsetHeight)||0,a=window.innerHeight,s=window.innerWidth-50;b?(v(s),p(20*s/14)):(p(a-t-24-24-24),v((a-t-24-24-24)*.7)),h&&!x&&new r.A(".zoomist-container",{maxScale:4,bounds:!0,slider:!0,zoomer:!0})},[h,b]),null==h?void 0:h.data.totalPage)?(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-5 xl:gap-40",children:[(0,s.jsx)("div",{className:"zoomist-container",style:{objectFit:"contain",width:j,height:f},children:(0,s.jsx)("div",{className:"zoomist-wrapper",children:(0,s.jsx)("div",{className:"zoomist-image",children:(0,s.jsx)(u,{style:{width:j,height:f,objectFit:"cover"},url:"".concat("https://bukuesto-backend.vercel.app/read-online","/book/").concat(t.slug,"/").concat(w),cacheKey:"book-".concat(t.slug,"-page-").concat(w),alt:"Buku ".concat(t.title," - Halaman ").concat(w)})})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)(m,{setPage:e=>{g(e)},book:t,totalPage:h.data.totalPage,currentPage:w}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsxs)("article",{className:"prose",children:[(0,s.jsx)("h2",{className:"",children:t.title}),(0,s.jsxs)("h2",{className:"text-sm text-gray-600",children:[t.published_year," ",t.publisher," | ",(0,c.h)(t.price)]}),(0,s.jsx)("div",{className:"mt-4",children:(0,c.y)(t.description)})]}),(0,s.jsx)("a",{href:"/detail/".concat(t.slug),className:"btn btn-sm btn-primary",children:"Detail Buku"})]})]})]}):(0,s.jsx)(i,{})}},4721:(e,t,a)=>{"use strict";a.d(t,{M:()=>l});var s=a(2115);function l(e,t){let[a,l]=(0,s.useState)(()=>{try{let a=window.localStorage.getItem(e);return a?JSON.parse(a):t}catch(a){return console.warn('Error reading localStorage key "'.concat(e,'":'),a),t}}),n=(0,s.useCallback)(t=>{try{let s=t instanceof Function?t(a):t;l(s),window.localStorage.setItem(e,JSON.stringify(s))}catch(t){console.warn('Error setting localStorage key "'.concat(e,'":'),t)}},[e,a]);return(0,s.useEffect)(()=>{function t(t){t.key===e&&t.newValue&&l(JSON.parse(t.newValue))}return window.addEventListener("storage",t),()=>{window.removeEventListener("storage",t)}},[e]),[a,n]}},1160:(e,t,a)=>{"use strict";a.d(t,{h:()=>n,y:()=>l});var s=a(5155);let l=e=>e.split("\n").map((e,t)=>(0,s.jsx)("p",{children:e},t)),n=e=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(e)}},e=>{var t=t=>e(e.s=t);e.O(0,[479,441,517,358],()=>t(5710)),_N_E=e.O()}]);